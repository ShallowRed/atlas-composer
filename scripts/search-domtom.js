import fs from 'fs';
const data = JSON.parse(fs.readFileSync('public/data/world-countries-50m.json', 'utf-8'));
const countries = data.objects.countries.geometries;

console.log('üéØ Recherche exhaustive des DOM-TOM dans Natural Earth\n');

// 1. V√©rification des IDs ISO num√©riques exacts
const exactIds = ['312', '474', '254', '638', '175'];
console.log('1Ô∏è‚É£ IDs ISO num√©riques exacts:');
exactIds.forEach(id => {
  const found = countries.find(c => c.id === id);
  if (found) {
    console.log(`  ‚úÖ ${id}: ${found.properties.name}`);
  } else {
    console.log(`  ‚ùå ${id}: Non trouv√©`);
  }
});

// 2. Recherche par fragments de noms sp√©cifiques
console.log('\n2Ô∏è‚É£ Recherche par fragments de noms:');
const fragments = [
  { fragment: 'guadal', expected: 'Guadeloupe' },
  { fragment: 'martin', expected: 'Martinique' },
  { fragment: 'reunion', expected: 'R√©union' },
  { fragment: 'mayot', expected: 'Mayotte' }
];

fragments.forEach(({ fragment, expected }) => {
  const matches = countries.filter(c => 
    (c.properties.name || '').toLowerCase().includes(fragment)
  );
  console.log(`  ${fragment} (${expected}): ${matches.length} r√©sultat(s)`);
  matches.forEach(m => console.log(`    ${m.id}: ${m.properties.name}`));
});

// 3. Liste compl√®te des territoires fran√ßais confirm√©s
console.log('\n3Ô∏è‚É£ Territoires fran√ßais confirm√©s trouv√©s:');
const confirmedFrench = [
  '250', // France
  '666', // St. Pierre and Miquelon  
  '876', // Wallis and Futuna
  '258', // Fr. Polynesia
  '540', // New Caledonia
  '260'  // Fr. S. Antarctic Lands (trouv√© plus t√¥t)
];

const foundTerritories = [];
confirmedFrench.forEach(id => {
  const territory = countries.find(c => c.id === id);
  if (territory) {
    foundTerritories.push(territory);
    console.log(`  ‚úÖ ${id}: ${territory.properties.name} (${territory.type})`);
  }
});

// 4. Analyse des propri√©t√©s pour comprendre la structure
console.log('\n4Ô∏è‚É£ Structure des propri√©t√©s (√©chantillon):');
foundTerritories.slice(0, 2).forEach(t => {
  console.log(`  ${t.id} (${t.properties.name}):`);
  console.log(`    Propri√©t√©s: ${JSON.stringify(t.properties, null, 6)}`);
});

console.log(`\nüìä R√©sum√©: ${foundTerritories.length} territoires fran√ßais trouv√©s sur ${confirmedFrench.length} recherch√©s`);